<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,height=device-height,initial-scale=1,maximum-scale=1,user-scalable=0,user-scalable=no,telephone=no"><title>SET Gamedev Canvas</title><script src="https://kit.fontawesome.com/a9fa307fe5.js" crossorigin="anonymous"></script><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script><style>body{font-family:"Apple LiGothic Medium","WenQuanYi Zen Hei","LiHei Pro","Microsoft JhengHei",Arial,sans-serif}canvas{width:33%;height:120px;border:1px solid #8e8e8e;border-radius:10px;margin:2px 2px auto}.active{border:2px solid #000}.tip{border:2px solid #fdaa51}.center{width:100%;text-align:center}.center div{margin:0 auto}@media screen and (max-height:500px){.box{width:45%}}@media screen and (min-height:1000px){.box{width:100%}}@media screen and (min-width:1000px) and (max-width:1400px) and (max-height:1024px){.box{width:70%}}@media screen and (min-width:1400px){.box{width:50%}}.box canvas{width:29%;height:120%;padding-bottom:.7%}</style></head><body><div class="center"><div><i class="fas fa-history fa-2x" style="color:#3dc609" onclick="reSet()"></i>&nbsp; <span style="color:red">計時:<span id="time">00:00:00</span></span><div style="float:right"><i class="fas fa-plus-square fa-2x" style="color:#4b94e0" onclick="addCanvas(3)"></i>&nbsp; <span>牌庫剩餘：<span id="setCard_num">0</span></span>&nbsp;&nbsp; <i id="tip" class="fas fa-question-circle fa-2x" style="color:#fdaa51" onclick="tipSet(!0)"></i></div></div><hr><div class="box"></div></div></body><script>var timerID,deck,tipMsg=!0,temp=new Date;function getUrlParam(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(t);return null!=a?unescape(a[2]):null}function checktimer(){var e=new Date,t=new Date(e-temp);document.getElementById("time").innerText=t.Myformat()}function reSet(){clearTimeout(timerID),timerID=setInterval(checktimer,1e3),temp=new Date,deck=["C1RB","C1RH","C1RF","C1GB","C1GH","C1GF","C1PB","C1PH","C1PF","C2RB","C2RH","C2RF","C2GB","C2GH","C2GF","C2PB","C2PH","C2PF","C3RB","C3RH","C3RF","C3GB","C3GH","C3GF","C3PB","C3PH","C3PF","D1RB","D1RH","D1RF","D1GB","D1GH","D1GF","D1PB","D1PH","D1PF","D2RB","D2RH","D2RF","D2GB","D2GH","D2GF","D2PB","D2PH","D2PF","D3RB","D3RH","D3RF","D3GB","D3GH","D3GF","D3PB","D3PH","D3PF","W1RB","W1RH","W1RF","W1GB","W1GH","W1GF","W1PB","W1PH","W1PF","W2RB","W2RH","W2RF","W2GB","W2GH","W2GF","W2PB","W2PH","W2PF","W3RB","W3RH","W3RF","W3GB","W3GH","W3GF","W3PB","W3PH","W3PF"],$("div.box").empty(),addCanvas(12,!0)}function addCanvas(e){if(0==deck.length)return alert("沒牌了!!!補啥補!!!\n還不快找!!!!"),!1;var t=$("canvas").length;if(18<=t)return alert("那麼多還找不到，太蠢了吧!!!\n hahaha~~~~"),!1;for(var a=t;a<t+e;a++){var n=document.createElement("canvas"),i="card_"+a;n.setAttribute("id",i),$("div.box").append(n),setRandomShape(i,!0)}}function setLogic(e,t,a){var n=e.attr("shape").split(""),i=t.attr("shape").split(""),r=a.attr("shape").split(""),o=[n[0],i[0],r[0]],c=[n[1],i[1],r[1]],s=[n[2],i[2],r[2]],l=[n[3],i[3],r[3]];o.sort(),c.sort(),s.sort(),l.sort();var v=Array.from(new Set(o)).join(""),h=Array.from(new Set(c)).join(""),d=Array.from(new Set(s)).join(""),f=Array.from(new Set(l)).join("");return!(1!=v.length&&"CDW"!=v||1!=h.length&&"123"!=h||1!=d.length&&"GPR"!=d||1!=f.length&&"BFH"!=f)}function clearCanvas(e){var t=document.getElementById(e);t.getContext("2d").clearRect(0,0,t.width,t.height),t.setAttribute("shape",""),$("#"+e).removeClass("active")}function reCanvas(){$("canvas:gt(11)[shape='']").each(function(){$(this).remove()}),$("canvas[shape='']").each(function(){setRandomShape($(this).attr("id"),!1)}),$("canvas:gt(11)").each(function(){$(this).attr("id","card_"+$(this).index())}),0==deck.length&&($("canvas[shape='']").each(function(){$(this).remove()}),$("canvas").each(function(){$(this).attr("id","card_"+$(this).index())}),tipSet(!1)||(clearTimeout(timerID),alert("你花了好久...(σﾟ∀ﾟ)σ\n然後終於玩完了~~~\n花費時間："+$("#time").text())))}function tipSet(e){for(var t=$("canvas").length,a=0;a<t-2;a++)for(var n=a+1;n<t-1;n++)for(var i=n+1;i<t;i++){var r=$("canvas[id='card_"+a+"'] "),o=$("canvas[id='card_"+n+"'] "),c=$("canvas[id='card_"+i+"'] ");if(setLogic(r,o,c)){if(e){if(tipMsg){if(!confirm("還有很多組喔...乁( ◔ ౪◔)「 \n確定要提示?"))return!1}r.removeClass("active").addClass("tip"),o.removeClass("active").addClass("tip"),c.removeClass("active").addClass("tip")}return!0}}return e&&alert("看什麼看!!!!沒有了啦!!!!還不快加牌!!!!"),!1}function getRandom(){return Math.floor(Math.random()*deck.length)}function setRandomShape(e,t){var a,n=$("canvas").length;if(t||n<=12){var i=getRandom();a=deck[i],deck.remove(i),$("#setCard_num").text(deck.length)}else{var r;a=(r=15<n?$("canvas:gt(14)").eq(0):$("canvas:gt(11)").eq(0)).attr("shape"),r.remove()}if(a){var o=document.getElementById(e);o.setAttribute("shape",a),draw(o.getContext("2d"),(a=a.split(""))[1],a[0],a[2],a[3])}}function draw(e,t,a,n,i){var r;if(1==t?r=[125]:2==t?r=[80,170]:3==t&&(r=[50,125,200]),"R"==n){var o="#ff3c3c";e.strokeStyle=o,e.fillStyle=o}else if("G"==n){o="#14a510";e.strokeStyle=o,e.fillStyle=o}else if("P"==n){o="#5f00b1";e.strokeStyle=o,e.fillStyle=o}"B"==i&&(e.fillStyle="white"),e.beginPath(),e.lineWidth=4;for(var c=0;c<r.length;c++)"D"==a?ctx_D(e,r[c]):"C"==a?ctx_C(e,r[c]):"W"==a&&ctx_W(e,r[c]);if(e.stroke(),"H"==i){e.beginPath(),e.lineWidth=1;for(c=0;c<r.length;c++)"D"==a?ctx_DH(e,r[c]):"C"==a?ctx_CH(e,r[c]):"W"==a&&ctx_WH(e,r[c]);e.stroke()}"B"==i||"H"==i||"F"==i&&e.fill()}function ctx_D(e,t){e.moveTo(t,75),e.lineTo(t+25,25),e.lineTo(t+50,75),e.lineTo(t+25,125),e.lineTo(t,75)}function ctx_DH(e,t){for(var a=0;a<17;a++){var n=0,i=0,r=35+5*a;i=a<8?(n=t+20-2.5*a)+5*(a+2):(n=t-20+2.5*a)+5*(18-a),e.moveTo(n,r),e.lineTo(i,r)}}function ctx_C(e,t){e.moveTo(t,50),e.lineTo(t,100),e.arcTo(t,125,t+25,125,25),e.arcTo(t+50,125,t+50,100,25),e.lineTo(t+50,50),e.arcTo(t+50,25,t+25,25,25),e.arcTo(t,25,t,50,25)}function ctx_CH(e,t){for(var a=0;a<2;a++)e.moveTo(t+5*(2-a),30+5*a),e.lineTo(t+50-5*(2-a),30+5*a);for(a=0;a<15;a++)e.moveTo(t,40+5*a),e.lineTo(t+50,40+5*a);for(a=0;a<2;a++)e.moveTo(t+5*(a+1),115+5*a),e.lineTo(t+50-5*(a+1),115+5*a)}function ctx_W(e,t){e.moveTo(t,30),e.bezierCurveTo(t+40,60,t-40,90,t,120),e.quadraticCurveTo(t+20,130,t+40,120),e.bezierCurveTo(t,90,t+80,60,t+40,30),e.quadraticCurveTo(t+20,20,t,30)}function ctx_WH(e,t){for(var a=0;a<19;a++)a<3?(e.moveTo(t+5*a,30+5*a),e.lineTo(t+30+6*(a+1),30+5*a)):a<5?(e.moveTo(t+3*a,30+5*a),e.lineTo(t+50,30+5*a)):a<7?(e.moveTo(t+3*(9-a),30+5*a),e.lineTo(t+50,30+5*a)):a<10?(e.moveTo(t+3*(10-a),30+5*a),e.lineTo(t+43,30+5*a)):a<12?(e.moveTo(t+3*(10-a),30+5*a),e.lineTo(t+34,30+5*a)):a<15?(e.moveTo(t+3*(10-a),30+5*a),e.lineTo(t+30,30+5*a)):a<19&&(e.moveTo(t+2*(a-19),30+5*a),e.lineTo(t+(a-14)+30,30+5*a))}Array.prototype.remove=function(e){if(isNaN(e)||e>this.length)return!1;for(var t=0,a=0;t<this.length;t++)this[t]!=this[e]&&(this[a++]=this[t]);0!=this.length&&(this.length-=1)},Date.prototype.Myformat=function(){return("0"+this.getUTCHours()).slice(-2)+":"+("0"+this.getUTCMinutes()).slice(-2)+":"+("0"+this.getUTCSeconds()).slice(-2)},$(document).ready(function(){"Y"==getUrlParam("tip")&&(tipMsg=!1),$("div.box").on("click","canvas",function(){if($(this).removeClass("tip"),$(this).hasClass("active")?$(this).removeClass("active"):$("canvas.active").length<3&&$(this).addClass("active"),3==$("canvas.active").length){var e=$("canvas.active").eq(0),t=$("canvas.active").eq(1),a=$("canvas.active").eq(2);setLogic(e,t,a)&&(clearCanvas(e.attr("id")),clearCanvas(t.attr("id")),clearCanvas(a.attr("id")),reCanvas())}}),reSet()})</script></html>
